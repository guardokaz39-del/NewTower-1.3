# Отчет по визуальному стилю и планы развития

**Проект:** NewTower 1.4 Alpha (Ink Style Update)
**Дата:** 26 Января 2026

## 1. Анализ текущего состояния

Текущий визуальный стиль ("Ink" / "Чернила и Пергамент") является **сильной и уникальной стороной проекта**. Он выделяет игру на фоне стандартных "пиксельных" или "векторных" Tower Defense.

### Что работает хорошо

* **«Живая» линия (Draw Wobble):** Использование алгоритма дрожащей линии (`InkUtils.drawWobbleLine`) создает приятную эстетику ручного рисунка.
* **Атмосфера (Lighting):** Система освещения (`InkLightingSystem`), которая не просто затемняет экран, а "тонирует" бумагу (Night Tint) и "выжигает" её светом (Bleach/Screen blend), выглядит очень органично.
* **Читаемость:** Сетка и пути четко видны, несмотря на стилизацию. Контраст между пергаментом и темными чернилами отличный.
* **UI (Интерфейс):** Карточная система выглядит аккуратно, шрифты читаемы.

### Зоны для улучшения (Potentials)

* **Связность (Consistency):** Враги и эффекты (снаряды) должны строго следовать "чернильному" стилю. Если они выглядят как обычные спрайты, это разрушает иллюзию.
* **Динамика фона:** "Бумага" сейчас статична. Можно добавить эффекты старения, пятна, или легкое движение текстуры.
* **UI Интеграция:** Интерфейс сейчас выглядит немного «поверх» мира. Его можно визуально интегрировать, сделав панели частью чертежа (рисованные рамки, текстура бумаги на кнопках).

---

## 2. Варианты развития стиля (Roadmap Options)

Предлагаю три направления развития. Каждое из них базируется на текущем коде, но смещает акценты.

### Вариант А: «Неоновый Гримуар» (Neon Grimoire)

**Концепция:** Смесь древней магии и технологий. Старый пергамент, но чернила светятся неоном.

* **Визуал:** Сохраняем бежевый фон, но линии башен и врагов светятся (Cyan, Magenta, Bright Orange).
* **Эффекты:** При попадании снарядов — всплески светящихся чернил.
* **UI:** Темные полупрозрачные панели с неоновой окантовкой.
* **Для кого:** Если хочется подчеркнуть "Techno" часть сеттинга.

### Вариант Б: «Живой Чертеж» (Living Blueprint)

**Концепция:** Игра происходит на столе инженера прямо в момент планирования.

* **Визуал:** Смещение палитры в сторону синьки (Blueprint) или технической бумаги (миллиметровка). Линии белые или темно-синие.
* **Анимации:** Башни при постройке "рисуются" быстрыми штрихами (анимация наброска). Враги — это небрежные каракули, которые стираются ластиком при смерти.
* **UI:** Выглядит как инструменты чертежника (линейки, карандашные пометки на полях).
* **Для кого:** Если важна тактическая атмосфера и ощущение "строительства".

### Вариант В: «Тактическая Карта» (Tactical Map) — *Рекомендуемый*

**Концепция:** Развитие текущего "Ink" стиля в сторону большей "физичности" и детализации.

* **Визуал:** Углубление текущего стиля. Добавить точечные тени (штриховка) для придания объема башням.
* **Окружение:** Добавить на карту посторонние предметы "с реального стола" (монеты, кружка чая, тень от руки игрока), чтобы создать эффект "игры на столе".
* **UI:** Стилизация под бумажные карточки и заметки, приколотые к карте.
* **Для кого:** Максимальное сохранение текущей атмосферы с добавлением "уюта" и глубины.

---

## 3. План конкретных улучшений (Action Plan)

Независимо от выбранного варианта, следующие шаги поднимут качество визуала на новый уровень:

### Этап 1: "Juice" (Сочность) и Частицы

* **Чернильные брызги:** При смерти врага он не просто исчезает, а оставляет кляксу, которая медленно высыхает (исчезает через 5-10 с).
* **Пыль и Дым:** Добавить легкие частицы пыли, летящие над картой (параллакс эффект), и дымок от башен.
* **Screen Shake:** Легкая тряска камеры при взрывах и получении урона базой.

### Этап 2: Интеграция UI

* **Рисованные рамки:** Заменить CSS `border: 1px solid` на SVG-маски или `border-image` с неровными краями, как у нарисованных чернилами прямоугольников.
* **Шрифты:** Использовать шрифт, имитирующий почерк или старую печать, для заголовков (сохраняя читаемый sans-serif для мелкого текста).

### Этап 3: Детализация Карты

* **Динамическая штриховка:** Добавить автоматическую генерацию теней-штриховки (hatching) от стен и башен в направлении, противоположном источнику света.
* **Виньетка и Фокус:** Усилить виньетку по краям экрана, чтобы фокус был на центре сражения.

## 4. Технические рекомендации

1. **Шейдеры (по возможности):** Для "растекания" чернил идеально подошел бы простой фрагментный шейдер, но текущая Canvas 2D реализация тоже справляется.
2. **Оптимизация:** Продолжать кэшировать статические элементы карты (как сделано в `InkMapRenderer`), так как отрисовка тысяч линий каждый кадр "убьет" FPS.

---
**Итог:** База отличная. Рекомендую двигаться по **Варианту В (Тактическая Карта)** с элементами **Варианта А (светящиеся эффекты)** для магии. Это создаст уникальный "Magicpunk on Paper" стиль.
