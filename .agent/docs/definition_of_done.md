# ‚úÖ Definition of Done (DoD)

–õ—é–±–∞—è —Ñ–∏—á–∞, –ø–æ–¥—Å–∏—Å—Ç–µ–º–∞ –∏–ª–∏ –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –≤ –ø—Ä–æ–µ–∫—Ç–µ **NewTower** —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–∞–∫–æ–Ω—á–µ–Ω–Ω–æ–π ("Done") —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —ç—Ç–æ–≥–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ —á–µ–∫–ª–∏—Å—Ç–∞. "–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–µ–º –∫–æ–º–ø–µ" –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ!

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–ª—É–∂–∏—Ç 4-—É—Ä–æ–≤–Ω–µ–≤—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º –∫–∞—á–µ—Å—Ç–≤–∞ —Å–¥–∞—á–∏ —Ä–∞–±–æ—Ç—ã.

---

### –£—Ä–æ–≤–µ–Ω—å 1: Code & Architecture üèóÔ∏è

1. **–¢–∏–ø–∏–∑–∞—Ü–∏—è:** –í–µ—Å—å –Ω–æ–≤—ã–π –∫–æ–¥ –∏–º–µ–µ—Ç Strict Typing –≤ TypeScript. –ù–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö/–ø—Ä–∏–Ω–∏–º–∞–µ–º—ã—Ö —Ç–∏–ø–æ–≤ `any` –≤ –º–µ—Å—Ç–∞—Ö, –≥–¥–µ —Ç–∏–ø –∏–∑–≤–µ—Å—Ç–µ–Ω.
2. **Pitfalls Checked:** –ö–æ–¥ –ø—Ä–æ–≤–µ—Ä–µ–Ω –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –≤—Å–µ—Ö –æ—à–∏–±–æ–∫ –∏–∑ —Ñ–∞–π–ª–∞ `.agent/docs/common_pitfalls.md` (–≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏: –∑–∞—â–∏—Ç–∞ –º–µ—Ç–æ–¥–æ–≤ –º—É—Ç–∞—Ü–∏–π `if (!isAlive())`, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ 2D IK –≤ DIR3).
3. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:** –†–∞–∑–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏ —Ä–∞–∑–Ω–µ—Å–µ–Ω—ã –ø–æ —Ä–∞–∑–Ω—ã–º —Å–∏—Å—Ç–µ–º–∞–º. –ò–∑–±–µ–≥–∞–µ–º God-objects.
4. **–°–æ–±—ã—Ç–∏—è (Events):** –í—Å–µ `EventBus.on` –∏–º–µ—é—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ `EventBus.off` –≤–Ω—É—Ç—Ä–∏ `destroy()` –º–µ—Ç–æ–¥–æ–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–≤–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ Memory Leaks).

### –£—Ä–æ–≤–µ–Ω—å 2: Tests & Edge-Cases üõ°Ô∏è

1. **–ë–∞–∑–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:** –û—Å–Ω–æ–≤–Ω–æ–π `happy-path` –Ω–æ–≤–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –ø–æ–∫—Ä—ã—Ç `expect(...)` –≤ Vitest.
2. **Minimum Viable Testing (MVT) —Å–æ–±–ª—é–¥–µ–Ω:** –ù–∞–ø–∏—Å–∞–Ω "–Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–π" —Ç–µ—Å—Ç (–∑–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤).
3. **Multi-stack / CallStack Testing:** –ï—Å–ª–∏ —Ñ–∏—á–∞ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç –Ω–∞—Å–ª–æ–µ–Ω–∏–µ/—Å—Ç–∞–∫–∞–Ω–∏–µ - –Ω–∞–ø–∏—Å–∞–Ω —Ç–µ—Å—Ç –Ω–∞ N-–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∑–æ–≤–æ–≤ (–ø—Ä–æ–±–æ–∏ —Å—Ç–µ–∫–∞ –∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ä–∞—Å—á–µ—Ç–æ–≤ –º–∞–∫—Å. —ç—Ñ—Ñ–µ–∫—Ç–∞).
4. `npm run test` –ø—Ä–æ—Ö–æ–¥–∏—Ç –Ω–∞ 100% (–Ω–µ—Ç –ø–æ–ª–æ–º–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ä—ã—Ö —Ç–µ—Å—Ç–æ–≤).

### –£—Ä–æ–≤–µ–Ω—å 3: Performance Check ‚ö°

1. **Zero Allocations (Hot Paths):** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–Ω—É—Ç—Ä–∏ –≤–∞—à–∏—Ö `update()` –∏ `draw()` –Ω–µ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ `new`, `[]`, `{}`, `.filter()`, –∏–ª–∏ `.map()`.
2. **Pooling:** –ï—Å–ª–∏ –≤–∞—à–∞ —Ñ–∏—á–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ ‚Äî –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω –ø—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º `reset()` –ø—Ä–æ—Ü–µ—Å—Å–æ–º.
3. **–ì—Ä–∞—Ñ–∏–∫–∞:** –í –≤–∞—à–∏—Ö —Ä–µ–Ω–¥–µ—Ä–µ—Ä–∞—Ö –Ω–µ—Ç –≤—ã–∑–æ–≤–æ–≤ `ctx.filter` –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤ –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä (`ctx.createRadialGradient`).
4. **–°—Ç—Ä–µ—Å—Å –¢–µ—Å—Ç:** –ó–∞–ø—É—Å–∫ `StressTestScene` (–≤ –∏–≥—Ä–µ) –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ –ø–∞–¥–µ–Ω–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ P99 —Ñ—Ä–µ–π–º–æ–≤ –Ω–∏–∂–µ 16ms (60 FPS –¥–µ—Ä–∂–∞—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ).

### –£—Ä–æ–≤–µ–Ω—å 4: UI & Localization üé®

1. **Glassmorphism:** –ù–æ–≤—ã–µ —ç–∫—Ä–∞–Ω—ã –∏ –ø–ª–∞—à–∫–∏ –º–µ–Ω—é –ø–æ–¥—á–∏–Ω—è—é—Ç—Å—è UI Design Tokens (–±–ª—é—Ä-—Ñ–æ–Ω—ã, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ä–∞–¥–∏—É—Å—ã –≥—Ä–∞–Ω–∏—Ü, —Ç–µ–Ω–∏).
2. **Async Append Safety:** –°–¥–µ–ª–∞–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç Race Conditions, –µ—Å–ª–∏ –≤ UI –≤—Å—Ç—Ä–æ–µ–Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø–æ–¥–≥—Ä—É–∑–∫–∞ –ø—Ä–µ—Å–µ—Ç–æ–≤/–∫–∞—Ä—Ç (—Å–º. Pitfall #17).
3. **–°–±—Ä–æ—Å —Å—Ç–µ–π—Ç–∞ —Ñ–æ–∫—É—Å–∞:** –ï—Å–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —Ö–æ—Ç–∫–µ–π ‚Äî –µ—Å—Ç—å —Å–±—Ä–æ—Å `isKey_Down = false` –Ω–∞ –ø–æ—Ç–µ—Ä–∏ –æ–∫–Ω–æ–º —Ñ–æ–∫—É—Å–∞ `blur`.
