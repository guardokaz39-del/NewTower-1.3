# ü¶¥ –ü—Ä–∞–≤–∏–ª–∞ –∏ –®–∞–±–ª–æ–Ω—ã –ü—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ–π –ê–Ω–∏–º–∞—Ü–∏–∏ –í—Ä–∞–≥–æ–≤ (IK)

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω–≤–µ—Ä—Å–Ω–æ–π –∫–∏–Ω–µ–º–∞—Ç–∏–∫–∏ (IK) –¥–ª—è –≤—Ä–∞–≥–æ–≤ –≤ NewTower. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –û—Ä–∫, –ì–æ–±–ª–∏–Ω, –¢—Ä–æ–ª–ª—å) **–≤—Å–µ–≥–¥–∞** —Å–ª–µ–¥—É–π—Ç–µ —ç—Ç–∏–º –ø—Ä–∞–≤–∏–ª–∞–º, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∏ "–∫—Ä–∞–±—å–µ–π –ø–æ—Ö–æ–¥–∫–∏".

---

## 1. –ü—Ä–æ–±–ª–µ–º–∞ –ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã (DIR3)

–í –∏–≥—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 3 –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (DIR3): `SIDE` (—Å–±–æ–∫—É), `UP` (—Å–∑–∞–¥–∏) –∏ `DOWN` (—Å–ø–µ—Ä–µ–¥–∏). –ì–ª–∞–≤–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ 2D IK ‚Äî –ø—Ä—è–º–∞—è –ø—Ä–æ–µ–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–æ–≤ –≤–∏–¥–∞ —Å–±–æ–∫—É –Ω–∞ –≤–∏–¥—ã —Å–ø–µ—Ä–µ–¥–∏/—Å–∑–∞–¥–∏.

### ‚ùå –û—à–∏–±–∫–∞ "–ö—Ä–∞–±—å—è –ø–æ—Ö–æ–¥–∫–∞" (–†–∞—Å–∫–æ—Ä—è—á–µ–Ω–Ω—ã–µ –Ω–æ–≥–∏)

–ï—Å–ª–∏ –≤–æ —Ñ—Ä–æ–Ω—Ç–∞–ª—å–Ω–æ–º –≤–∏–¥–µ –∑–∞–¥–∞—Ç—å —Å–º–µ—â–µ–Ω–∏–µ –Ω–æ–≥ –ø–æ –æ—Å–∏ X (–≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ) —Ç–∞–∫ –∂–µ, –∫–∞–∫ –≤ –≤–∏–¥–µ —Å–±–æ–∫—É, –∫–æ–ª–µ–Ω–∏ –≤—ã–≥–Ω—É—Ç—Å—è –Ω–∞—Ä—É–∂—É, –∏ –ø–µ—Ä—Å–æ–Ω–∞–∂ –±—É–¥–µ—Ç –¥–≤–∏–≥–∞—Ç—å—Å—è –±–æ–∫–æ–º, –∫–∞–∫ –∫—Ä–∞–±.

### ‚úÖ –†–µ—à–µ–Ω–∏–µ: –†–∞–∑–¥–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ IK (2D IK vs –ü—Ä–æ–µ–∫—Ü–∏–æ–Ω–Ω—ã–π IK)

–ü—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –º–µ—Ç–æ–¥–∞ `applyProceduralIK(p: SkeletonPose)` –≤—Å–µ–≥–¥–∞ –∂–µ—Å—Ç–∫–æ —Ä–∞–∑–¥–µ–ª—è–π—Ç–µ –ª–æ–≥–∏–∫—É:

```typescript
if (p.facing === 'SIDE') {
    // 1. –ò–°–¢–ò–ù–ù–´–ô 2D IK (–í–∏–¥ —Å–±–æ–∫—É)
    // - –ü–æ–ª–Ω–∞—è —Å–≤–æ–±–æ–¥–∞ –ø–æ –æ—Å–∏ X (—à–∞–≥ –≤–ø–µ—Ä–µ–¥-–Ω–∞–∑–∞–¥)
    // - –ö–æ–ª–µ–Ω–∏ —Å–≥–∏–±–∞—é—Ç—Å—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–æ—á–Ω–æ (solve2BoneIK)
    // - –†—É–∫–∏ —Ä–∞–∑–º–∞—Ö–∏–≤–∞—é—Ç –ø–æ –æ—Å–∏ X
} else {
    // 2. –ü–†–û–ï–ö–¶–ò–û–ù–ù–´–ô –ü–°–ï–í–î–û-3D IK (–í–∏–¥—ã —Å–ø–µ—Ä–µ–¥–∏ 'DOWN' –∏ —Å–∑–∞–¥–∏ 'UP')
    // - –ó–∞–ø—Ä–µ—Ç –Ω–∞ —à–∏—Ä–æ–∫–∏–µ –∫–æ–ª–µ–±–∞–Ω–∏—è –ø–æ –æ—Å–∏ X! –°—Ç—É–ø–Ω–∏ –∏ –∫–∏—Å—Ç–∏ –¥–≤–∏–≥–∞—é—Ç—Å—è –ø–æ –æ—Å–∏ Y (–∏–º–∏—Ç–∞—Ü–∏—è –≥–ª—É–±–∏–Ω—ã).
    // - –®–∞–≥ (strideDepth) –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç—Å—è –æ–ø—Ç–∏—á–µ—Å–∫–∏–º "—É–∫–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ–º" –¥–ª–∏–Ω—ã –∫–æ—Å—Ç–µ–π, –∞ –Ω–µ –∏—Ö –∏–∑–≥–∏–±–æ–º –≤ —Å—Ç–æ—Ä–æ–Ω—ã.
    // - –ö–æ–ª–µ–Ω–∏ –∏ –ª–æ–∫—Ç–∏ –ª–∏—à—å –°–õ–ï–ì–ö–ê —Å–¥–≤–∏–≥–∞—é—Ç—Å—è –≤–±–æ–∫ –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã.
}
```

---

## 2. –ê–Ω–∞—Ç–æ–º–∏—è –∏ –ü—Ä–æ–ø–æ—Ä—Ü–∏–∏ (–ó–∞—â–∏—Ç–∞ –æ—Ç NaN –∏ —Ä–∞–∑—Ä—ã–≤–æ–≤)

–ï—Å–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –Ω–∞—á–∞–ª—å–Ω–æ–π —Ç–æ—á–∫–∏ (—Ç–∞–∑) –¥–æ –∫–æ–Ω–µ—á–Ω–æ–π (—Å—Ç—É–ø–Ω—è) –ø—Ä–µ–≤—ã—à–∞–µ—Ç —Å—É–º–º—É –¥–ª–∏–Ω –¥–≤—É—Ö –∫–æ—Å—Ç–µ–π (–±–µ–¥—Ä–æ + –∏–∫—Ä–∞), IK-—Å–æ–ª–≤–µ—Ä –ø–µ—Ä–µ—Å—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `NaN` –∏–ª–∏ —Ä–∏—Å—É–µ—Ç –∫–æ—Å—Ç–∏ –≤—ã—Ç—è–Ω—É—Ç–æ–π –ø—Ä—è–º–æ–π –ª–∏–Ω–∏–µ–π, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –∏–∑–≥–∏–± –∫–æ–ª–µ–Ω–∞.

**–ü—Ä–∞–≤–∏–ª–∞ –≥–µ–æ–º–µ—Ç—Ä–∏–∏ —Ç–µ–ª–∞:**

1. **–ó–∞–¥–µ–ª –Ω–∞ –∏–∑–≥–∏–±:** –û–±—â–µ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –ø–æ–ª–∞ (`feetY`) –¥–æ —Ç–∞–∑–∞ –û–®–ò–ë–ö–ê –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å—Ç—Ä–æ–≥–æ –ú–ï–ù–¨–®–ï —Å—É–º–º—ã –¥–ª–∏–Ω –∫–æ—Å—Ç–µ–π –Ω–æ–≥ (`THIGH_LEN + CALF_LEN`).
   * *–ü—Ä–∏–º–µ—Ä:* –ï—Å–ª–∏ –Ω–æ–≥–∏ 6.5 + 6.5 = 13, —Ç–∞–∑ –¥–æ–ª–∂–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ –≤—ã—Å–æ—Ç–µ –º–∞–∫—Å–∏–º—É–º 10-11 –æ—Ç –ø–æ–ª–∞, —á—Ç–æ–±—ã –∫–æ–ª–µ–Ω–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –º–æ–≥–ª–∏ —Å–æ–≥–Ω—É—Ç—å—Å—è.
2. **–¶–µ–Ω—Ç—Ä —Ç—è–∂–µ—Å—Ç–∏:** –¢–∞–∑ (`pelvis`) –ª—É—á—à–µ —Å–ø—É—Å–∫–∞—Ç—å –Ω–∏–∂–µ, –∞ –Ω–µ –∑–∞–¥–∏—Ä–∞—Ç—å –≤–≤–µ—Ä—Ö. –≠—Ç–æ –¥–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ—Ä –¥–ª—è IK –Ω–æ–≥.
3. **–ü–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫ –∏ –®–µ—è:** –®–µ—è –Ω–µ –¥–æ–ª–∂–Ω–∞ "–≤–∏—Å–µ—Ç—å" —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ –æ—Ç —Ç–∞–∑–∞. –°–±–ª–∏–∂–∞–π—Ç–µ –∏—Ö, —á—Ç–æ–±—ã –ø–ª–µ—á–∏ –∏ –≥–æ–ª–æ–≤–∞ –Ω–µ –ø–∞—Ä–∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –Ω–æ–≥.

---

## 3. –ß–µ–∫-–ª–∏—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è Procedural Renderer-–∞

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ `Base[Monster]Renderer.ts` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `BaseOrcRenderer`):

* [ ] –°–æ–∑–¥–∞–π—Ç–µ –æ–±—ä–µ–∫—Ç `Pose` (–Ω–∞–ø—Ä., `OrcPose`), —Å–æ–¥–µ—Ä–∂–∞—â–∏–π `joints` (—Å—É—Å—Ç–∞–≤—ã) –∏ `anchors` (—è–∫–æ—Ä—è –∫—Ä–µ–ø–ª–µ–Ω–∏—è –æ—Ä—É–∂–∏—è/–ø—Ä–µ–¥–º–µ—Ç–æ–≤).
* [ ] –†–∞–∑–¥–µ–ª–∏—Ç–µ –ª–æ–≥–∏–∫—É –≤—ã—à–∞–≥–∏–≤–∞–Ω–∏—è –≤ `SIDE` –∏ `UP/DOWN`.
* [ ] –í –ø—Ä–æ–µ–∫—Ü–∏–∏ `UP/DOWN` –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Math.sin(cycle)` –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã `Y` —Å—Ç—É–ø–Ω–µ–π (`strideDepth`), –∏–º–∏—Ç–∏—Ä—É—è —à–∞–≥ –≤ –≥–ª—É–±–∏–Ω—É —ç–∫—Ä–∞–Ω–∞.
* [ ] –ó–∞–±–ª–æ–∫–∏—Ä—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–π –∏–∑–≥–∏–± –∫–æ–ª–µ–Ω–µ–π –≤ `UP/DOWN`: –ø—Ä–æ—Å—Ç–æ —Å–æ–∫—Ä–∞—â–∞–π—Ç–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ (–∫–æ–º–ø—Ä–µ—Å—Å–∏—Ä—É–π—Ç–µ –∫–æ—Å—Ç–∏).
* [ ] –ó–∞—â–∏—Ç–∏—Ç–µ `solve2BoneIK` –æ—Ç –¥–µ–ª–µ–Ω–∏—è –Ω–∞ `0` –∏ –ø–µ—Ä–µ—Ä–∞–∑–≥–∏–±–æ–≤ (`clamp`).
* [ ] –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–π—Ç–µ —Å—Ç—É–ø–Ω–∏ —Å —É—á–µ—Ç–æ–º —Ä–∞–∫—É—Ä—Å–∞ (–≤ `DOWN` –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã "—Å–º–æ—Ç—Ä–µ—Ç—å" —á—É—Ç—å –≤ —Å—Ç–æ—Ä–æ–Ω—ã –∏ –≤–Ω–∏–∑, –≤ `UP` ‚Äî –Ω–∞—Ä—É–∂—É –∏ –≤–≤–µ—Ä—Ö).
* [ ] –î–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞ —Å –∏–≥—Ä–æ–≤–æ–π –¥–æ—Ä–æ–≥–æ–π **–≤—Å–µ–≥–¥–∞** –¥–æ–±–∞–≤–ª—è–π—Ç–µ –Ω–∏–∂–Ω–∏–π —Å–ª–æ–π-–æ–±–≤–æ–¥–∫—É (Shadow Pass) –¥–ª—è –∫–æ—Å—Ç–µ–π. –î–µ–ª–∞–π—Ç–µ –µ—ë —Ç–æ–ª—â–µ –Ω–∞ 2px –∏ —Ç–µ–º–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–º–Ω–æ-–∫–æ—Ä–∏—á–Ω–µ–≤–æ–≥–æ –∏–ª–∏ –∏—Å—Å–∏–Ω—è-—á–µ—Ä–Ω–æ–≥–æ).

```typescript
// –ü—Ä–∏–º–µ—Ä: –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å—Ç—É–ø–Ω–µ–π —Å —É—á–µ—Ç–æ–º –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã
let dirX = (facing === 'UP') ? (isLeft ? -1.5 : 1.5) : (isLeft ? -2 : 2);
let dirY = (facing === 'UP') ? -1 : 2;
// –¥–ª—è SIDE —Å—Ç–æ–ø–∞ –≤—Å–µ–≥–¥–∞ —Å–º–æ—Ç—Ä–∏—Ç –≤–ø–µ—Ä–µ–¥
```

---

## 4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è (–•—É–∫–∏ –∏ –û–û–ü)

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–ª–æ–∂–Ω—ã—Ö –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º (—Ç–∞–∫–∏—Ö –∫–∞–∫ `BaseSkeletonRenderer`) –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–∞—Ç—Ç–µ—Ä–Ω **Template Method**: –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å —Ä–∏—Å—É–µ—Ç –æ–±—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É (–∫–æ—Å—Ç–∏), –∞ –¥–æ—á–µ—Ä–Ω–∏–µ –∫–ª–∞—Å—Å—ã —Ä–µ–∞–ª–∏–∑—É—é—Ç "—Ö—É–∫–∏" (`drawHeadDecoration`, `drawBodyArmor`, `drawRightHandItem`), —á—Ç–æ–±—ã –¥–æ–±–∞–≤–ª—è—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—É—é —ç–∫–∏–ø–∏—Ä–æ–≤–∫—É.

### ‚ö†Ô∏è –û—à–∏–±–∫–∞ "Static Readonly" (–ü—Ä–æ–±–ª–µ–º–∞ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ü–≤–µ—Ç–æ–≤)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –≤—ã –æ–±—ä—è–≤–ª—è–µ—Ç–µ —Ü–≤–µ—Ç–∞ –∫–æ—Å—Ç–µ–π –≤ –±–∞–∑–æ–≤–æ–º –∫–ª–∞—Å—Å–µ –∫–∞–∫ `protected static readonly BONE_MAIN = '#...';`, –¥–æ—á–µ—Ä–Ω–∏–µ –∫–ª–∞—Å—Å—ã –Ω–µ —Å–º–æ–≥—É—Ç –∏—Ö –ª–µ–≥–∫–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–ª—è —Å–≤–æ–∏—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤. –°—Ç–∞—Ç–∏–∫–∞ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –∫–ª–∞—Å—Å—É, –∞ –Ω–µ –æ–±—ä–µ–∫—Ç—É.

**–†–µ—à–µ–Ω–∏–µ:** –î–ª—è –ª—é–±—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –º–µ–Ω—è—Ç—å—Å—è —É –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–≤ (—Ü–≤–µ—Ç–∞, —Ä–∞–∑–º–µ—Ä—ã, –æ—Ç—Å—Ç—É–ø—ã), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–π—Å—Ç–≤–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ (Instance Properties) –∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–π—Ç–µ –∏—Ö —á–µ—Ä–µ–∑ `override`:

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å):**

```typescript
protected static readonly BONE_MAIN = '#e0d0b0';
// –î–æ—á–µ—Ä–Ω–∏–π –∫–ª–∞—Å—Å (SkeletonMiner) –Ω–µ —Å–º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —ç—Ç–æ—Ç —Ü–≤–µ—Ç –¥–ª—è —Å–µ–±—è
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ (–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å):**

```typescript
protected boneMain: string = '#e0d0b0'; // –°–≤–æ–π—Å—Ç–≤–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
```

**–î–æ—á–µ—Ä–Ω–∏–π –∫–ª–∞—Å—Å:**

```typescript
export class SkeletonMinerRenderer extends BaseSkeletonRenderer {
    protected override boneMain = '#d4cba7'; // –¢–µ–ø–µ—Ä—å —à–∞—Ö—Ç–µ—Ä –∏–º–µ–µ—Ç –≥—Ä—è–∑–Ω—ã–µ –∫–æ—Å—Ç–∏
}
```

–í—Å–µ–≥–¥–∞ –∑–∞–∫–ª–∞–¥—ã–≤–∞–π—Ç–µ –≤ –±–∞–∑–æ–≤—ã–π –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π –∫–ª–∞—Å—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≥–∏–±–∫–æ–≥–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–∞–ª–∏—Ç—Ä—ã —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞.

---

## 5. –ö–æ–Ω—Ç—Ä–∞–∫—Ç –û—Ç—Ä–∏—Å–æ–≤–∫–∏ –ß–µ—Ä–µ–ø–∞ (`drawSkull`)

`BaseSkeletonRenderer` **–ù–ï —Ä–∏—Å—É–µ—Ç —á–µ—Ä–µ–ø –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –≤ `drawTorso()`. –ß–µ—Ä–µ–ø —Ä–∏—Å—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ shared protected –º–µ—Ç–æ–¥ `drawSkull()`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–∫–ª–∞—Å—Å—ã **–æ–±—è–∑–∞–Ω—ã –≤—ã–∑–≤–∞—Ç—å** –≤ `drawHeadDecoration()`.

> [!CAUTION]
> –ï—Å–ª–∏ –∑–∞–±—ã—Ç—å `this.drawSkull()` –≤ `drawHeadDecoration()`, —É –≤—Ä–∞–≥–∞ –±—É–¥–µ—Ç —à–ª–µ–º/–∫–∞—Å–∫–∞ –±–µ–∑ –≥–æ–ª–æ–≤—ã ‚Äî –∫–∞—Å–∫–∞ –ø–æ–≤–∏—Å–Ω–µ—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ —à–µ–∏.

### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω

```typescript
protected drawHeadDecoration(ctx: CanvasRenderingContext2D, pose: SkeletonPose): void {
    ctx.save();
    ctx.translate(pose.anchors.head.x, pose.anchors.head.y);
    ctx.rotate(pose.anchors.head.angle);

    // 1. –°–ù–ê–ß–ê–õ–ê ‚Äî —á–µ—Ä–µ–ø (–Ω–∏–∂–Ω–∏–π —Å–ª–æ–π)
    this.drawSkull(ctx, pose.scale, pose.facing);

    // 2. –ü–û–¢–û–ú ‚Äî —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∞ –ø–æ–≤–µ—Ä—Ö (–∫–∞—Å–∫–∞, —à–ª–µ–º, –∫–∞–ø—é—à–æ–Ω...)
    // ...

    ctx.restore();
}
```

### –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞

| –°–≤–æ–π—Å—Ç–≤–æ | –ü–æ —É–º–æ–ª—á. | –û–ø–∏—Å–∞–Ω–∏–µ |
| --- | --- | --- |
| `boneMain` | `#e0d0b0` | –°–≤–µ—Ç–ª—ã–π —Ü–≤–µ—Ç –∫–æ—Å—Ç–∏ |
| `boneShadow` | `#4e342e` | –¢—ë–º–Ω–∞—è –æ–±–≤–æ–¥–∫–∞ |
| `eyeGlow` | `#d32f2f` | –¶–≤–µ—Ç —Å–≤–µ—á–µ–Ω–∏—è –≥–ª–∞–∑ |
| `headRadius` | `5.5` | –†–∞–¥–∏—É—Å —á–µ—Ä–µ–ø–Ω–æ–π –∫–æ—Ä–æ–±–∫–∏ |

### –ü—Ä–∏–º–µ—Ä: SkeletonMiner (–∑–µ–ª—ë–Ω—ã–µ –≥–ª–∞–∑–∞, –≥—Ä—è–∑–Ω—ã–µ –∫–æ—Å—Ç–∏)

```typescript
export class SkeletonMinerRenderer extends BaseSkeletonRenderer {
    protected override boneMain = '#d4cba7';
    protected override eyeGlow = '#66bb6a';
}
```
